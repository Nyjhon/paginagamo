import{o as n,c as y,w as i,a as l,h as c,e as s,i as V,m as k,Q as u,g as m,b6 as f,b7 as C,b8 as x,p as b,k as g,l as w,q as _,b9 as h,f as U,t as D}from"./index.60323709.js";import{Q as v}from"./QImg.22d5224a.js";import{Q}from"./QForm.16a89fc1.js";import{Q as A}from"./QPage.f120dced.js";import{d as E}from"./date.ea5ee918.js";import{_ as S}from"./plugin-vue_export-helper.21dcd24c.js";import"./format.8ac60962.js";const{formatDate:q}=E,I={data(){return{dialogappadd:!1,docData:{titulo:"",url:"",fecha:q(Date.now(),"YYYY-MM-DD"),visible:!0,resaltar:!1},img:null,imagePreview:null,app:[]}},created(){this.miapp()},methods:{onImageSelected(t){const e=t.target.files[0];e&&(this.img=e,this.imagePreview=URL.createObjectURL(e))},Crearapp(){this.$q.dialog({title:"Confirmaci\xF3n",message:"\xBFEst\xE1 seguro de crear el registro?",ok:{push:!0},cancel:{push:!0,color:"negative"},persistent:!0}).onOk(()=>{const t=new FormData;t.append("titulo",this.docData.titulo),t.append("url",this.docData.url),t.append("fecha",this.docData.fecha),t.append("visible",this.docData.visible?"1":"0"),t.append("resaltar",this.docData.resaltar?"1":"0"),this.img&&t.append("img",this.img),this.$q.loading.show(),this.$api.post("crearapp",t,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{this.$q.loading.hide(),this.docData={titulo:"",url:"",fecha:q(Date.now(),"YYYY-MM-DD"),visible:!0,resaltar:!1},this.img=null,this.dialogappadd=!1,this.miapp(),this.$q.notify({message:"App creado Correctamente",type:"positive"})}).catch(e=>{console.error("Error al crear:",e)})})},miapp(){this.$api.get("miapp").then(t=>{this.app=t.data,console.log(this.app)})},getPdfUrl(t){return t?`http://192.168.154.233:81${t}`:""},Eliminar(t){this.$q.dialog({title:"Confirmar",message:"\xBFEst\xE1 seguro de eliminar app?",cancel:!0,persistent:!0}).onOk(()=>{this.$api.post("eliminarapp",{datos:t}).then(e=>{console.log(e.data),this.app=this.app.filter(d=>d.id!==t.id),this.$q.notify({message:"Ventana eliminada correctamente",type:"negative"})}).catch(e=>{this.$q.notify({message:"Error al eliminar la ventana",type:"warning"})})})},confirmarCambioEstado(t,e){this.$q.dialog({title:"Confirmar",message:"\xBFEst\xE1 seguro de cambiar el estado de visibilidad?",cancel:!0,persistent:!0}).onOk(()=>{this.$api.post("cambiarestadoapp",{id:t.id,visible:e}).then(d=>{this.$q.notify({message:"Estado actualizado correctamente",type:"positive"}),t.visible=e}).catch(d=>{this.$q.notify({message:"Error al actualizar estado",type:"negative"}),t.visible=!e})}).onCancel(()=>{t.visible=!e})},resaltar(t,e){this.$q.dialog({title:"Confirmar",message:"\xBFEst\xE1 seguro de resaltar App?",cancel:!0,persistent:!0}).onOk(()=>{this.$api.post("resaltarapp",{id:t.id,resaltar:e}).then(d=>{this.$q.notify({message:"Resaltado actualizado correctamente",type:"positive"}),t.resaltar=e}).catch(d=>{this.$q.notify({message:"Error al actualizar estado",type:"negative"}),t.resaltar=!e})}).onCancel(()=>{t.resaltar=!e})}}},R={class:"row full-width"},P={class:"col-2 flex flex-center"},Y={class:"row"},N={class:"text-h5"},L={class:"text-h6"},T=["href"],B={class:"row q-col-gutter-md"},M={class:"col-12"},O={class:"col-12"},z={class:"col-4"},F={class:"col-4"},G={key:0,class:"q-mt-sm"},$={class:"col-4"},j={class:"col-4"};function H(t,e,d,J,o,r){return n(),y(A,{class:"q-pa-md"},{default:i(()=>[l(m,null,{default:i(()=>[l(c,{class:"q-pa-none",style:{"background-color":"#b28f00"}},{default:i(()=>e[9]||(e[9]=[s("div",{class:"text-h6 text-center q-pa-none text-white"},"M\xF3dulo de Aplicaciones y Servicios",-1)])),_:1}),l(V),l(k,null,{default:i(()=>[s("div",R,[s("div",P,[l(u,{onClick:e[0]||(e[0]=a=>o.dialogappadd=!0),color:"primary",icon:"add",label:"A\xF1adir Nueva App"})])])]),_:1})]),_:1}),l(m,null,{default:i(()=>[l(c,null,{default:i(()=>[s("div",Y,[(n(!0),f(x,null,C(o.app,a=>(n(),f("div",{class:"col-12 col-sm-6 col-md-3",key:a.id},[l(m,{class:"my-card q-ma-md"},{default:i(()=>[l(c,{class:"bg-primary text-white"},{default:i(()=>[s("div",N,[e[10]||(e[10]=b("Titulo:")),s("strong",null,D(a.titulo),1)]),s("div",L,[s("strong",null,D(a.url),1)]),s("a",{href:a.url,target:"_blank",class:"text-h6",style:{color:"bisque"}}," Ver URL ",8,T)]),_:2},1024),a.img_url?(n(),y(c,{key:0},{default:i(()=>[l(v,{src:r.getPdfUrl(a.img_url),style:{"max-height":"200px"}},null,8,["src"])]),_:2},1024)):_("",!0),l(V),l(c,{align:"right"},{default:i(()=>[l(u,{flat:"",color:"negative",onClick:p=>r.Eliminar(a)},{default:i(()=>e[11]||(e[11]=[b("Eliminar")])),_:2},1032,["onClick"]),l(h,{"model-value":a.visible,"onUpdate:modelValue":p=>r.confirmarCambioEstado(a,p),label:"Visible","checked-icon":"check","unchecked-icon":"close",color:"green"},null,8,["model-value","onUpdate:modelValue"]),l(h,{"model-value":a.resaltar,"onUpdate:modelValue":p=>r.resaltar(a,p),label:"Resaltar","checked-icon":"check","unchecked-icon":"close",color:"green"},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]))),128))])]),_:1})]),_:1}),l(U,{modelValue:o.dialogappadd,"onUpdate:modelValue":e[8]||(e[8]=a=>o.dialogappadd=a),persistent:""},{default:i(()=>[l(m,{style:{width:"700px"}},{default:i(()=>[l(Q,{onSubmit:r.Crearapp,enctype:"multipart/form-data"},{default:i(()=>[l(c,{class:"text-h6 text-center"},{default:i(()=>[e[12]||(e[12]=b(" REGISTRAR NUEVA APLICACI\xD3N ")),e[13]||(e[13]=s("hr",null,null,-1)),s("div",B,[s("div",M,[l(g,{modelValue:o.docData.titulo,"onUpdate:modelValue":e[1]||(e[1]=a=>o.docData.titulo=a),label:"T\xEDtulo",outlined:"",class:"uppercase-input",required:""},null,8,["modelValue"])]),s("div",O,[l(g,{modelValue:o.docData.url,"onUpdate:modelValue":e[2]||(e[2]=a=>o.docData.url=a),outlined:"",class:"uppercase-input",required:"",type:"url",label:"URL del App"},null,8,["modelValue"])]),s("div",z,[l(g,{label:"Fecha",outlined:"",type:"date",modelValue:o.docData.fecha,"onUpdate:modelValue":e[3]||(e[3]=a=>o.docData.fecha=a),class:"q-mt-md",readonly:""},null,8,["modelValue"])]),s("div",F,[l(g,{outlined:"",label:"Seleccionar Imagen"},{append:i(()=>[l(w,{name:"image"})]),default:i(()=>[s("input",{type:"file",accept:"image/*",onChange:e[4]||(e[4]=(...a)=>r.onImageSelected&&r.onImageSelected(...a)),class:"absolute-full",style:{opacity:"0",cursor:"pointer"},required:""},null,32)]),_:1}),o.imagePreview?(n(),f("div",G,[l(v,{src:o.imagePreview,style:{"max-height":"150px"}},null,8,["src"])])):_("",!0)]),s("div",$,[l(h,{modelValue:o.docData.visible,"onUpdate:modelValue":e[5]||(e[5]=a=>o.docData.visible=a),label:"Visible","checked-icon":"check","unchecked-icon":"close",color:"green"},null,8,["modelValue"])]),s("div",j,[l(h,{modelValue:o.docData.resaltar,"onUpdate:modelValue":e[6]||(e[6]=a=>o.docData.resaltar=a),label:"Resaltar","checked-icon":"check","unchecked-icon":"close",color:"green"},null,8,["modelValue"])])])]),_:1}),l(k,{align:"right"},{default:i(()=>[l(u,{flat:"",label:"Cancelar",color:"primary",onClick:e[7]||(e[7]=a=>o.dialogappadd=!1)}),l(u,{flat:"",label:"Guardar",color:"negative",type:"submit"})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"])]),_:1})}var ae=S(I,[["render",H]]);export{ae as default};
