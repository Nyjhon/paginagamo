import{r as _,o as f,c as w,w as s,a as e,Q as g,e as n,t as P,f as N,g as I,h as C,i as O,j as k,k as v,l as u,m as Q,n as S,p as l,q as p}from"./index.60323709.js";import{Q as x,a as D,b as V,c as A,d as L}from"./QDrawer.6c4c5275.js";import{Q as h}from"./QImg.22d5224a.js";import{Q as q}from"./QForm.16a89fc1.js";import{Q as y,a as o,b as m,c as t}from"./QList.9166df1a.js";import{Q as E}from"./QPageContainer.5c057f91.js";import{Q as T}from"./QLayout.e0e42f02.js";import{C as U}from"./ClosePopup.4a42d959.js";import{d as R}from"./date.ea5ee918.js";import{g as B}from"./globalStore.2a063993.js";import{_ as G}from"./plugin-vue_export-helper.21dcd24c.js";import"./QSlideTransition.a3129178.js";import"./TouchPan.cc619607.js";import"./touch.9135741d.js";import"./selection.880541e6.js";import"./format.8ac60962.js";const j={data(){return{store:B(),leftDrawerOpen:!1,now:R.formatDate(Date.now(),"dddd D  MMMM",{days:["Domingo","Lunes","Martes","Miercoles","Jueves","Viernes","Sabado"],daysShort:["Dum","Lun"],months:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthsShort:["Ian","Feb"]}),dialogCambio:!1,TypePassword:!0,cambiopas:{passwordold:"",passwordnew:"",passwordconf:""},errorPasswordOld:!1,errorPasswordNew:!1,errorPasswordConf:!1,errorMessagePasswordOld:"",errorMessagePasswordNew:"",errorMessagePasswordConf:""}},created(){this.store.isLoggedIn||this.$router.push("/login")},methods:{toggleLeftDrawer(){this.leftDrawerOpen=!this.leftDrawerOpen},logout(){this.$q.loading.show(),this.$api.post("/logout").then(()=>{this.$q.loading.hide(),this.$router.push("/login")})},abrirdialogcambio(){this.cambiopas={},this.errorPasswordOld=!1,this.errorMessagePasswordOld="",this.errorPasswordNew=!1,this.errorMessagePasswordNew="",this.errorPasswordConf=!1,this.errorMessagePasswordConf="",this.dialogCambio=!0},cambio(){if(!this.cambiopas.passwordold){this.errorPasswordOld=!0,this.errorMessagePasswordOld="La antigua contrase\xF1a es requerida",this.errorPasswordNew=!1,this.errorMessagePasswordNew="",this.errorPasswordConf=!1,this.errorMessagePasswordConf="";return}if(!this.cambiopas.passwordnew){this.errorPasswordNew=!0,this.errorMessagePasswordNew="La nueva contrase\xF1a es requerida",this.errorPasswordOld=!1,this.errorMessagePasswordOld="",this.errorPasswordConf=!1,this.errorMessagePasswordConf="";return}if(this.cambiopas.passwordnew.length<6){this.errorPasswordNew=!0,this.errorMessagePasswordNew="La nueva contrase\xF1a debe tener al menos 6 caracteres",this.errorPasswordOld=!1,this.errorMessagePasswordOld="",this.errorPasswordConf=!1,this.errorMessagePasswordConf="";return}if(this.cambiopas.passwordnew!==this.cambiopas.passwordconf){this.errorPasswordConf=!0,this.errorMessagePasswordConf="Las contrase\xF1as no coinciden",this.errorPasswordOld=!1,this.errorMessagePasswordOld="",this.errorPasswordNew=!1,this.errorMessagePasswordNew="";return}this.$api.post("/updatePassword",{passwordold:this.cambiopas.passwordold,passwordnew:this.cambiopas.passwordnew}).then(i=>{this.$q.notify({type:"positive",message:"Contrase\xF1a actualizada correctamente"}),this.dialogCambio=!1,this.$router.push("/login")}).catch(i=>{var r,b;this.$q.notify({type:"negative",message:((b=(r=i.response)==null?void 0:r.data)==null?void 0:b.error)||"Error al cambiar la contrase\xF1a. Intenta de nuevo."})})}},resetErrors(){this.errorPasswordOld=!1,this.errorPasswordNew=!1,this.errorPasswordConf=!1,this.errorMessagePasswordOld="",this.errorMessagePasswordNew="",this.errorMessagePasswordConf=""}},F={class:"row"},z={class:"col-1 text-right"},J={class:"q-px-lg q-pt-xs q-mb-md"},H={class:"text-h5 text-bold"},W={class:"text-subtitle1"},Y={style:{display:"flex","justify-content":"center","align-items":"center"}};function K(i,r,b,X,a,c){const M=_("router-view");return f(),w(T,{view:"lHh Lpr lFf"},{default:s(()=>[e(V,{elevated:"",style:{"background-color":"#5d0004"}},{default:s(()=>[e(x,null,{default:s(()=>[e(g,{flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:c.toggleLeftDrawer,style:{color:"white"}},null,8,["onClick"]),e(D,null,{default:s(()=>[n("div",F,[r[6]||(r[6]=n("div",{class:"col-11 text-center text-white"}," ADMNISTRACI\xD3N DE LA PAGINA WEB DEL G.A.M.O. ",-1)),n("div",z,[e(g,{label:"Cambio de contrase\xF1a",onClick:c.abrirdialogcambio,color:"secondary",icon:"lock",size:"xs"},null,8,["onClick"])])])]),_:1})]),_:1}),n("div",J,[n("div",H,[n("div",null,P(i.$store.user.name),1)]),n("div",W,P(a.now),1)]),e(h,{src:"fondo.jpg",class:"header-image absolute-top"}),e(N,{modelValue:a.dialogCambio,"onUpdate:modelValue":r[4]||(r[4]=d=>a.dialogCambio=d)},{default:s(()=>[e(I,{style:{width:"400px","max-width":"90vw"}},{default:s(()=>[e(C,null,{default:s(()=>r[7]||(r[7]=[n("div",{class:"text-h6 text-center"},"Cambio de Contrase\xF1a",-1)])),_:1}),e(O),e(C,null,{default:s(()=>[e(q,{onSubmit:k(c.cambio,["prevent"]),ref:"formCambio"},{default:s(()=>[e(v,{required:"",modelValue:a.cambiopas.passwordold,"onUpdate:modelValue":r[1]||(r[1]=d=>a.cambiopas.passwordold=d),label:"Antigua Contrase\xF1a",type:a.TypePassword?"password":"text",dense:"",outlined:"",class:"q-mb-md",error:a.errorPasswordOld,"error-message":a.errorMessagePasswordOld},{append:s(()=>[e(u,{onClick:r[0]||(r[0]=d=>a.TypePassword=!a.TypePassword),name:a.TypePassword?"visibility":"visibility_off"},null,8,["name"])]),_:1},8,["modelValue","type","error","error-message"]),e(v,{required:"",modelValue:a.cambiopas.passwordnew,"onUpdate:modelValue":r[2]||(r[2]=d=>a.cambiopas.passwordnew=d),label:"Nueva Contrase\xF1a",type:"password",dense:"",outlined:"",class:"q-mb-md",error:a.errorPasswordNew,"error-message":a.errorMessagePasswordNew},null,8,["modelValue","error","error-message"]),e(v,{required:"",modelValue:a.cambiopas.passwordconf,"onUpdate:modelValue":r[3]||(r[3]=d=>a.cambiopas.passwordconf=d),label:"Confirmar Nueva Contrase\xF1a",type:"password",dense:"",outlined:"",class:"q-mb-md",error:a.errorPasswordConf,"error-message":a.errorMessagePasswordConf},null,8,["modelValue","error","error-message"]),e(g,{type:"submit",label:"Registrar",color:"primary",class:"full-width q-mb-sm"})]),_:1},8,["onSubmit"])]),_:1}),e(Q,{align:"right"},{default:s(()=>[S(e(g,{flat:"",label:"Cerrar",color:"primary"},null,512),[[U]])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),e(L,{modelValue:a.leftDrawerOpen,"onUpdate:modelValue":r[5]||(r[5]=d=>a.leftDrawerOpen=d),"show-if-above":"",bordered:"",style:{"background-color":"#5d0004",color:"white"}},{default:s(()=>[e(y,null,{default:s(()=>[e(o,{header:"",style:{padding:"0px"}},{default:s(()=>[n("div",Y,[e(h,{class:"absolute-top",src:"fondo.jpg",style:{height:"130px",position:"relative"}})])]),_:1}),e(m,{clickable:"",to:"/inicio/adm",exact:"","active-class":"active-menu",class:"menu-item"},{default:s(()=>[e(t,{avatar:""},{default:s(()=>[e(u,{name:"home"})]),_:1}),e(t,null,{default:s(()=>[e(o,null,{default:s(()=>r[8]||(r[8]=[l("INICIO")])),_:1}),e(o,null,{default:s(()=>r[9]||(r[9]=[l("Inicio")])),_:1})]),_:1})]),_:1}),i.$store.user.tipo==1?(f(),w(A,{key:0,label:"ADMINISTRACI\xD3N","expand-separator":"","switch-toggle-side":""},{header:s(()=>[e(t,null,{default:s(()=>[e(o,null,{default:s(()=>r[10]||(r[10]=[l("ADMINISTRACI\xD3N")])),_:1})]),_:1}),e(t,{avatar:""},{default:s(()=>[e(u,{name:"settings",color:"white"})]),_:1})]),default:s(()=>[e(y,null,{default:s(()=>[e(m,{clickable:"",to:"/inicio/admin/users","active-class":"active-menu",class:"menu-subitem"},{default:s(()=>[e(t,null,{default:s(()=>[e(o,null,{default:s(()=>r[11]||(r[11]=[l("Gestor de Usuarios")])),_:1})]),_:1})]),_:1}),e(m,{clickable:"",to:"/inicio/admin/units","active-class":"active-menu",class:"menu-subitem"},{default:s(()=>[e(t,null,{default:s(()=>[e(o,null,{default:s(()=>r[12]||(r[12]=[l("Gestos de Unidades")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})):p("",!0),i.$store.user.unit_id==1?(f(),w(m,{key:1,clickable:"",to:"/inicio/popup",exact:"","active-class":"active-menu",class:"menu-item"},{default:s(()=>[e(t,{avatar:""},{default:s(()=>[e(u,{name:"notifications_active"})]),_:1}),e(t,null,{default:s(()=>[e(o,null,{default:s(()=>r[13]||(r[13]=[l("VENTANA EMERGENTES")])),_:1}),e(o,null,{default:s(()=>r[14]||(r[14]=[l("Notificaciones")])),_:1})]),_:1})]),_:1})):p("",!0),i.$store.user.unit_id==1?(f(),w(m,{key:2,clickable:"",to:"/inicio/carrusel",exact:"","active-class":"active-menu",class:"menu-item"},{default:s(()=>[e(t,{avatar:""},{default:s(()=>[e(u,{name:"slideshow"})]),_:1}),e(t,null,{default:s(()=>[e(o,null,{default:s(()=>r[15]||(r[15]=[l("CARRUSEL")])),_:1}),e(o,null,{default:s(()=>r[16]||(r[16]=[l("Imagenes de Presentaci\xF3n")])),_:1})]),_:1})]),_:1})):p("",!0),i.$store.user.unit_id==4||i.$store.user.unit_id==1?(f(),w(m,{key:3,clickable:"",to:"/inicio/documentos",exact:"","active-class":"active-menu",class:"menu-item"},{default:s(()=>[e(t,{avatar:""},{default:s(()=>[e(u,{name:"description"})]),_:1}),e(t,null,{default:s(()=>[e(o,null,{default:s(()=>r[17]||(r[17]=[l("DOCUMENTOS")])),_:1}),e(o,null,{default:s(()=>r[18]||(r[18]=[l("Publicaci\xF3n de archivos")])),_:1})]),_:1})]),_:1})):p("",!0),i.$store.user.unit_id==3||i.$store.user.unit_id==1?(f(),w(m,{key:4,clickable:"",to:"/inicio/noticias",exact:"","active-class":"active-menu",class:"menu-item"},{default:s(()=>[e(t,{avatar:""},{default:s(()=>[e(u,{name:"article"})]),_:1}),e(t,null,{default:s(()=>[e(o,null,{default:s(()=>r[19]||(r[19]=[l("NOTICIAS")])),_:1}),e(o,null,{default:s(()=>r[20]||(r[20]=[l("Publicaci\xF3n de Noticias")])),_:1})]),_:1})]),_:1})):p("",!0),i.$store.user.unit_id==1?(f(),w(m,{key:5,clickable:"",to:"/inicio/aplicaciones",exact:"","active-class":"active-menu",class:"menu-item"},{default:s(()=>[e(t,{avatar:""},{default:s(()=>[e(u,{name:"apps"})]),_:1}),e(t,null,{default:s(()=>[e(o,null,{default:s(()=>r[21]||(r[21]=[l("SERVICIOS Y APLICACIONES")])),_:1}),e(o,null,{default:s(()=>r[22]||(r[22]=[l("Sistemas Publicados")])),_:1})]),_:1})]),_:1})):p("",!0),e(m,{clickable:"",onClick:c.logout,exact:"","active-class":"menu-logout",class:"menu-item"},{default:s(()=>[e(t,{avatar:""},{default:s(()=>[e(u,{name:"logout"})]),_:1}),e(t,null,{default:s(()=>[e(o,null,{default:s(()=>r[23]||(r[23]=[l("Salir")])),_:1}),e(o,null,{default:s(()=>r[24]||(r[24]=[l("Salir del sistema")])),_:1})]),_:1})]),_:1},8,["onClick"])]),_:1})]),_:1},8,["modelValue"]),e(E,null,{default:s(()=>[e(M)]),_:1})]),_:1})}var pe=G(j,[["render",K]]);export{pe as default};
