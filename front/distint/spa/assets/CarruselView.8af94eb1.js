import{o as d,c as v,w as i,a as t,h as n,e as s,i as b,m as y,Q as u,g as m,b6 as g,b7 as x,b8 as q,p,k as f,l as w,q as _,b9 as C,f as E,t as k}from"./index.60323709.js";import{Q as D}from"./QImg.22d5224a.js";import{Q}from"./QForm.16a89fc1.js";import{Q as U}from"./QPage.f120dced.js";import{d as I}from"./date.ea5ee918.js";import{_ as S}from"./plugin-vue_export-helper.21dcd24c.js";import"./format.8ac60962.js";const{formatDate:V}=I,N={data(){return{dialogcarruseladd:!1,docData:{titulo:"",fecha:V(Date.now(),"YYYY-MM-DD"),visible:!0},img:null,imagePreview:null,carrusel:[]}},created(){this.micarrusel()},methods:{onImageSelected(a){const e=a.target.files[0];e&&(this.img=e,this.imagePreview=URL.createObjectURL(e))},Crearcarrusel(){this.$q.dialog({title:"Confirmaci\xF3n",message:"\xBFEst\xE1 seguro de crear el registro?",ok:{push:!0},cancel:{push:!0,color:"negative"},persistent:!0}).onOk(()=>{const a=new FormData;a.append("titulo",this.docData.titulo),a.append("fecha",this.docData.fecha),a.append("visible",this.docData.visible?"1":"0"),this.img&&a.append("img",this.img),this.$q.loading.show(),this.$api.post("crearcarrusel",a,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{this.$q.loading.hide(),this.micarrusel(),this.docData={titulo:"",fecha:V(Date.now(),"YYYY-MM-DD"),visible:!0},this.img=null,this.dialogcarruseladd=!1,this.$q.notify({message:"Imagen registrada Correctamente",type:"positive"})}).catch(e=>{console.error("Error al crear:",e)})})},micarrusel(){this.$api.get("micarrusel").then(a=>{this.carrusel=a.data,console.log(this.carrusel)})},getPdfUrl(a){return a?`http://192.168.154.233:81${a}`:""},Eliminar(a){this.$q.dialog({title:"Confirmar",message:"\xBFEst\xE1 seguro de eliminar esta carrusel?",cancel:!0,persistent:!0}).onOk(()=>{this.$api.post("eliminarcarrusel",{datos:a}).then(e=>{this.carrusel=this.carrusel.filter(c=>c.id!==a.id),this.$q.notify({message:"Carrusel eliminada correctamente",type:"negative"})}).catch(e=>{this.$q.notify({message:"Error al eliminar la carrusel",type:"warning"})})})},confirmarCambioEstado(a,e){this.$q.dialog({title:"Confirmar",message:"\xBFEst\xE1 seguro de cambiar el estado de visibilidad?",cancel:!0,persistent:!0}).onOk(()=>{this.$api.post("cambiarEstadocarrusel",{id:a.id,visible:e}).then(c=>{this.$q.notify({message:"Estado actualizado correctamente",type:"positive"}),a.visible=e}).catch(c=>{this.$q.notify({message:"Error al actualizar estado",type:"negative"}),a.visible=!e})}).onCancel(()=>{a.visible=!e})}}},Y={class:"row full-width"},P={class:"col-2 flex flex-center"},R={class:"row"},A={class:"text-h5"},M={class:"text-h6"},T={class:"row q-col-gutter-md"},B={class:"col-12"},L={class:"col-4"},F={class:"col-4"},O={key:0,class:"q-mt-sm"},G={class:"col-4"};function $(a,e,c,z,r,o){return d(),v(U,{class:"q-pa-md"},{default:i(()=>[t(m,null,{default:i(()=>[t(n,{class:"q-pa-none",style:{"background-color":"#b28f00"}},{default:i(()=>e[7]||(e[7]=[s("div",{class:"text-h6 text-center q-pa-none text-white"},"M\xF3dulo del Carrusel",-1)])),_:1}),t(b),t(y,null,{default:i(()=>[s("div",Y,[s("div",P,[t(u,{onClick:e[0]||(e[0]=l=>r.dialogcarruseladd=!0),color:"primary",icon:"add",label:"A\xF1adir Nueva Imagen"})])])]),_:1})]),_:1}),t(m,null,{default:i(()=>[t(n,null,{default:i(()=>[s("div",R,[(d(!0),g(q,null,x(r.carrusel,l=>(d(),g("div",{class:"col-12 col-sm-6 col-md-3",key:l.id},[t(m,{class:"my-card q-ma-md"},{default:i(()=>[t(n,{class:"bg-primary text-white"},{default:i(()=>[s("div",A,[e[8]||(e[8]=p("Titulo:")),s("strong",null,k(l.titulo),1)]),s("div",M,[s("strong",null,k(l.descripcion),1)])]),_:2},1024),l.img_url?(d(),v(n,{key:0},{default:i(()=>[t(D,{src:o.getPdfUrl(l.img_url),style:{"max-height":"200px"}},null,8,["src"])]),_:2},1024)):_("",!0),t(b),t(n,{align:"right"},{default:i(()=>[t(u,{flat:"",color:"negative",onClick:h=>o.Eliminar(l)},{default:i(()=>e[9]||(e[9]=[p("Eliminar")])),_:2},1032,["onClick"]),t(C,{"model-value":l.visible,"onUpdate:modelValue":h=>o.confirmarCambioEstado(l,h),label:"Visible","checked-icon":"check","unchecked-icon":"close",color:"green"},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]))),128))])]),_:1})]),_:1}),t(E,{modelValue:r.dialogcarruseladd,"onUpdate:modelValue":e[6]||(e[6]=l=>r.dialogcarruseladd=l),persistent:""},{default:i(()=>[t(m,{style:{width:"700px"}},{default:i(()=>[t(Q,{onSubmit:o.Crearcarrusel,enctype:"multipart/form-data"},{default:i(()=>[t(n,{class:"text-h6 text-center"},{default:i(()=>[e[10]||(e[10]=p(" REGISTRAR NUEVA IMAGEN EN EL CARRUSEL ")),e[11]||(e[11]=s("hr",null,null,-1)),s("div",T,[s("div",B,[t(f,{modelValue:r.docData.titulo,"onUpdate:modelValue":e[1]||(e[1]=l=>r.docData.titulo=l),label:"T\xEDtulo",outlined:"",class:"uppercase-input"},null,8,["modelValue"])]),s("div",L,[t(f,{label:"Fecha",outlined:"",type:"date",modelValue:r.docData.fecha,"onUpdate:modelValue":e[2]||(e[2]=l=>r.docData.fecha=l),class:"q-mt-md",readonly:""},null,8,["modelValue"])]),s("div",F,[t(f,{outlined:"",label:"Seleccionar Imagen"},{append:i(()=>[t(w,{name:"image"})]),default:i(()=>[s("input",{type:"file",accept:"image/*",onChange:e[3]||(e[3]=(...l)=>o.onImageSelected&&o.onImageSelected(...l)),class:"absolute-full",style:{opacity:"0",cursor:"pointer"},required:""},null,32)]),_:1}),r.imagePreview?(d(),g("div",O,[t(D,{src:r.imagePreview,style:{"max-height":"150px"}},null,8,["src"])])):_("",!0)]),s("div",G,[t(C,{modelValue:r.docData.visible,"onUpdate:modelValue":e[4]||(e[4]=l=>r.docData.visible=l),label:"Visible","checked-icon":"check","unchecked-icon":"close",color:"green"},null,8,["modelValue"])])])]),_:1}),t(y,{align:"right"},{default:i(()=>[t(u,{flat:"",label:"Cancelar",color:"primary",onClick:e[5]||(e[5]=l=>r.dialogcarruseladd=!1)}),t(u,{flat:"",label:"Guardar",color:"negative",type:"submit"})]),_:1})]),_:1},8,["onSubmit"])]),_:1})]),_:1},8,["modelValue"])]),_:1})}var ee=S(N,[["render",$]]);export{ee as default};
