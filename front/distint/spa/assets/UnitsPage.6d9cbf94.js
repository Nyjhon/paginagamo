import{o as g,c as b,w as i,a,h as s,e as d,i as v,m as u,Q as n,l as V,g as p,p as c,k as m,j as y,f,t as h,b6 as x,b7 as w,b8 as D,b0 as C}from"./index.60323709.js";import{Q,a as T}from"./QTable.17c40189.js";import{Q as k,b as S,c as _}from"./QList.9166df1a.js";import{Q as q}from"./QPage.f120dced.js";import{_ as A}from"./plugin-vue_export-helper.21dcd24c.js";import"./QChip.a8ddf73a.js";import"./selection.880541e6.js";import"./format.8ac60962.js";import"./use-fullscreen.ccad7cbe.js";const E={name:"UnitsPage",data(){return{dialoganuevounits:!1,dialogoAsignarTipos:!1,dialogaeditarunits:!1,unidadSeleccionada:null,tiposSeleccionados:[],UnitsData:{codigo:"",nombre:""},rows:[],columns:[{name:"codigo",label:"C\xF3digo",field:"codigo",align:"left"},{name:"nombre",label:"Nombre",field:"nombre",align:"left"},{name:"opciones",label:"Opciones",align:"center"}],tiposDocumentos:[]}},created(){this.cargarUnits()},methods:{cargarUnits(){this.$api.get("listaunits").then(t=>{console.log(t.data),this.rows=t.data}).catch(t=>{console.error("Error al cargar usuarios:",t)})},cargarTipos(){this.$api.get("listatipos").then(t=>{this.tiposDocumentos=t.data}).catch(t=>{console.error("Error al cargar usuarios:",t)})},abrirDialogoAsignarTipos(t){this.unidadSeleccionada=t,this.tiposSeleccionados=t.tipos?t.tipos.map(e=>e.id):[],this.dialogoAsignarTipos=!0},asignarTipos(){const t={unit_id:this.unidadSeleccionada.id,tipos:this.tiposSeleccionados};console.log(t),this.$api.post("asignarTipos",t).then(()=>{this.cargarUnits(),this.dialogoAsignarTipos=!1,this.$q.notify({type:"positive",message:"Tipos asignados con \xE9xito"})}).catch(e=>{console.error("Error al asignar tipos:",e)})},guardarUnits(){const t=this.UnitsData;this.$api.post("crearunits",t).then(e=>{console.log(e.data),this.cargarUnits(),this.dialoganuevounits=!1,this.$q.notify({type:"positive",message:"Unidad Creado Exitosamente"})}).catch(e=>{console.error("Error al Crear la unidad:",e)})},editarUnits(t){this.UnitsData.codigo=t.codigo,this.UnitsData.nombre=t.nombre,this.UnitsData.id=t.id,this.dialogaeditarunits=!0},editUnits(){const t=this.UnitsData;this.$api.post("editardoc",t).then(e=>{console.log(e.data),this.cargarUnits(),this.dialogaeditarunits=!1,this.$q.notify({type:"positive",message:"Unidad Modificado Exitosamente"})}).catch(e=>{console.error("Error al Modificar la Unidad:",e)})}}},N={class:"row full-width"},B={class:"col-2 flex flex-center"};function M(t,e,P,G,l,r){return g(),b(q,{class:"q-pa-md"},{default:i(()=>[a(p,null,{default:i(()=>[a(s,{class:"q-pa-none",style:{"background-color":"#b28f00"}},{default:i(()=>e[15]||(e[15]=[d("div",{class:"text-h6 text-center q-pa-none text-white"},"M\xF3dulo de Unidades",-1)])),_:1}),a(v),a(u,null,{default:i(()=>[d("div",N,[d("div",B,[a(n,{onClick:e[0]||(e[0]=o=>l.dialoganuevounits=!0),color:"primary",icon:"person_add",label:"A\xF1adir Unidad"})])])]),_:1}),a(v),a(s,{class:"q-pa-none"},{default:i(()=>[a(Q,{title:"Lista de Unidades",rows:l.rows,columns:l.columns,"row-key":"id","rows-per-page-options":[100]},{"body-cell-opciones":i(o=>[a(T,{props:o},{default:i(()=>[a(V,{name:"edit",color:"secondary",size:"md",class:"cursor-pointer",onClick:U=>r.editarUnits(o.row)},null,8,["onClick"])]),_:2},1032,["props"])]),_:1},8,["rows","columns"])]),_:1})]),_:1}),a(f,{modelValue:l.dialoganuevounits,"onUpdate:modelValue":e[5]||(e[5]=o=>l.dialoganuevounits=o),persistent:""},{default:i(()=>[a(p,{style:{width:"700px","max-width":"80vw"}},{default:i(()=>[d("form",{onSubmit:e[4]||(e[4]=y((...o)=>r.guardarUnits&&r.guardarUnits(...o),["prevent"]))},[a(s,{class:"text-h6"},{default:i(()=>e[16]||(e[16]=[c("Registrar Unidad")])),_:1}),a(s,null,{default:i(()=>[a(m,{modelValue:l.UnitsData.codigo,"onUpdate:modelValue":e[1]||(e[1]=o=>l.UnitsData.codigo=o),label:"C\xF3digo de Unidad",outlined:"",class:"uppercase-input",required:""},null,8,["modelValue"]),a(m,{modelValue:l.UnitsData.nombre,"onUpdate:modelValue":e[2]||(e[2]=o=>l.UnitsData.nombre=o),label:"Nombre de Unidad",outlined:"",class:"q-mt-md uppercase-input",required:""},null,8,["modelValue"])]),_:1}),a(u,{align:"right"},{default:i(()=>[a(n,{flat:"",label:"Cancelar",color:"primary",onClick:e[3]||(e[3]=o=>l.dialoganuevounits=!1)}),a(n,{flat:"",label:"Guardar",color:"primary",type:"submit"})]),_:1})],32)]),_:1})]),_:1},8,["modelValue"]),a(f,{modelValue:l.dialogaeditarunits,"onUpdate:modelValue":e[10]||(e[10]=o=>l.dialogaeditarunits=o),persistent:""},{default:i(()=>[a(p,{style:{width:"700px","max-width":"80vw"}},{default:i(()=>[d("form",{onSubmit:e[9]||(e[9]=y((...o)=>r.editUnits&&r.editUnits(...o),["prevent"]))},[a(s,{class:"text-h6"},{default:i(()=>e[17]||(e[17]=[c("Editar Unidad")])),_:1}),a(s,null,{default:i(()=>[a(m,{modelValue:l.UnitsData.codigo,"onUpdate:modelValue":e[6]||(e[6]=o=>l.UnitsData.codigo=o),label:"C\xF3digo de Unidad",outlined:"",class:"uppercase-input",required:""},null,8,["modelValue"]),a(m,{modelValue:l.UnitsData.nombre,"onUpdate:modelValue":e[7]||(e[7]=o=>l.UnitsData.nombre=o),label:"Nombre de Unidad",outlined:"",class:"q-mt-md uppercase-input",required:""},null,8,["modelValue"])]),_:1}),a(u,{align:"right"},{default:i(()=>[a(n,{flat:"",label:"Cancelar",color:"primary",onClick:e[8]||(e[8]=o=>l.dialogaeditarunits=!1)}),a(n,{flat:"",label:"Guardar",color:"primary",type:"submit"})]),_:1})],32)]),_:1})]),_:1},8,["modelValue"]),a(f,{modelValue:l.dialogoAsignarTipos,"onUpdate:modelValue":e[14]||(e[14]=o=>l.dialogoAsignarTipos=o)},{default:i(()=>[a(p,{style:{width:"500px","max-width":"80vw"}},{default:i(()=>[a(s,{class:"text-h6"},{default:i(()=>{var o;return[c(" Asignar Tipos de Documentos a: "+h((o=l.unidadSeleccionada)==null?void 0:o.nombre),1)]}),_:1}),a(s,null,{default:i(()=>[a(k,{bordered:""},{default:i(()=>[(g(!0),x(D,null,w(l.tiposDocumentos,o=>(g(),b(S,{key:o.id},{default:i(()=>[a(_,null,{default:i(()=>[a(C,{modelValue:l.tiposSeleccionados,"onUpdate:modelValue":e[11]||(e[11]=U=>l.tiposSeleccionados=U),label:o.nombre,val:o.id},null,8,["modelValue","label","val"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),a(u,{align:"right"},{default:i(()=>[a(n,{flat:"",label:"Cancelar",color:"primary",onClick:e[12]||(e[12]=o=>l.dialogoAsignarTipos=!1)}),a(n,{flat:"",label:"Guardar",color:"primary",onClick:e[13]||(e[13]=o=>r.asignarTipos())})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})}var K=A(E,[["render",M],["__scopeId","data-v-1ac97e3e"]]);export{K as default};
